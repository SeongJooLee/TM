<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="mapper.boardImage">

	<!--  테이블 컬럼하고 VO하고 1:1 맵핑했을 때 이름이 다르면 안됌. -->
   <resultMap id="imageResult" type="ImageVO">
      <result property="noticeNO" column="noticeNO" />
      <result property="travelNO" column="travelNO" />
      <result property="reviewNO" column="reviewNO" />
      <result property="promotionNO" column="promotionNO" />
      <result property="eventNO" column="eventNO" />
      <result property="image1" column="image1" />
      <result property="image2" column="image2" />
      <result property="image3" column="image3" />
      <result property="id" column="id" />
      <result property="sellerId" column="sellerId" />
      <result property="adminId" column="adminId" />
   </resultMap>
   
   <select id="selectAll" resultMap="imageResult">
		SELECT NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3
		 FROM IMAGE
	</select>
	
	<select id="selectOneNotice" resultType="imageVO"> 
		SELECT NOTICENO, IMAGE1, IMAGE2, IMAGE3
		 FROM IMAGE
		 where noticeNO=#{noticeNO}
	</select>
	
	<insert id="insertNotice" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3)
	 VALUES((select max(noticeNO) from notice), null, null, null, null, #{image1}, #{image2}, #{image3})
	</insert>
	
	<update id="updateNotice" parameterType="imageVO"> 
		UPDATE IMAGE SET IMAGE1=#{image1}, IMAGE2=#{image2}, IMAGE3=#{image3}
		 where noticeNO=#{noticeNO}
	</update>
	
	<delete id="deleteNotice" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where noticeNO=#{noticeNO}
	</delete>
<!-- 	
	<insert id="insertTravel" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3, IMAGE4, IMAGE5, IMAGE6, IMAGE7, IMAGE8, IMAGE9, IMAGE10)
	 VALUES(null, (select max(travelNO) from travel), null, null, null, #{image1}, #{image2}, #{image3}, #{image4}, #{image5}, #{image6}, #{image7}, #{image8}, #{image9}, #{image10})
	</insert>
	<insert id="insertReview" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3, IMAGE4, IMAGE5, IMAGE6, IMAGE7, IMAGE8, IMAGE9, IMAGE10)
	 VALUES(null, null, (select max(reviewNO) from review), null, null, #{image1}, #{image2}, #{image3}, #{image4}, #{image5}, #{image6}, #{image7}, #{image8}, #{image9}, #{image10})
	</insert>
	<insert id="insertPromotion" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3, IMAGE4, IMAGE5, IMAGE6, IMAGE7, IMAGE8, IMAGE9, IMAGE10)
	 VALUES(null, null, null, (select max(promotionNO) from promotion), null}, #{image1}, #{image2}, #{image3}, #{image4}, #{image5}, #{image6}, #{image7}, #{image8}, #{image9}, #{image10})
	</insert>
	<insert id="insertEvent" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3, IMAGE4, IMAGE5, IMAGE6, IMAGE7, IMAGE8, IMAGE9, IMAGE10)
	 VALUES(null, null, null, null, (select max(eventNO) from event), #{image1}, #{image2}, #{image3}, #{image4}, #{image5}, #{image6}, #{image7}, #{image8}, #{image9}, #{image10})
	</insert>
	 -->

	<select id="selectOnePromotion" resultType="imageVO"> 
		SELECT PROMOTIONNO, IMAGE1, IMAGE2, IMAGE3
		 FROM IMAGE
		 where promotionNO=#{promotionNO}
	</select>
	
	<insert id="insertPromotion" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3)
	 VALUES(null, null, null, (select max(promotionNO) from promotion), null, #{image1}, #{image2}, #{image3})
	</insert>
	
	<update id="updatePromotion" parameterType="imageVO"> 
		UPDATE IMAGE SET IMAGE1=#{image1}, IMAGE2=#{image2}, IMAGE3=#{image3}
		 where promotionNO=#{promotionNO}
	</update>
	
	<delete id="deletePromotion" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where promotionNO=#{promotionNO}
	</delete>
	
	<delete id="deleteUser" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where id=#{userId}
	</delete>
   
   
   	<select id="selectOne" resultType="imageVO"> 
		SELECT REVIEWNO, IMAGE1, IMAGE2, IMAGE3
		 FROM IMAGE
		 where reviewNO=#{reviewNO}
	</select>
	
	<insert id="insert" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3)
	 VALUES(null, null, null, (select max(promotionNO) from promotion), null, #{image1}, #{image2}, #{image3})
	</insert>
	
	<update id="update" parameterType="imageVO"> 
		UPDATE IMAGE SET IMAGE1=#{image1}, IMAGE2=#{image2}, IMAGE3=#{image3}
		 where reviewNO=#{reviewNO}
	</update>
	
	<delete id="delete" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where reviewNO=#{reviewNO}
	</delete>
	
	<select id="selectOneTravel" resultType="imageVO"> 
		SELECT TRAVELNO, IMAGE1, IMAGE2, IMAGE3
		 FROM IMAGE
		 where travelNO=#{travelNO}
	</select>
	
	<insert id="insertTravel" parameterType="imageVO">
	INSERT INTO IMAGE (NOTICENO, TRAVELNO, REVIEWNO, PROMOTIONNO, EVENTNO, IMAGE1, IMAGE2, IMAGE3)
	 VALUES(null, (select max(travelNO) from travel), null, null, null, #{image1}, #{image2}, #{image3})
	</insert>
	
	<update id="updateTravel" parameterType="imageVO"> 
		UPDATE IMAGE SET IMAGE1=#{image1}, IMAGE2=#{image2}, IMAGE3=#{image3}
		 where travelNO=#{travelNO}
	</update>
	
	<delete id="deleteTravel" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where travelNO=#{travelNO}
	</delete>
	
	<delete id="deletePro" parameterType="imageVO"> 
		DELETE FROM IMAGE
		 where promotionNO=#{promotionNO}
	</delete>
	
</mapper>