<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="mapper.boardNotice">

	<!--  테이블 컬럼하고 VO하고 1:1 맵핑했을 때 이름이 다르면 안됌. -->
   <resultMap id="noticeResult" type="NoticeVO">
      <result property="noticeNO" column="noticeNO" />
      <result property="title" column="title" />
      <result property="content" column="content" />
      <result property="adminID" column="adminID" />
      <result property="name" column="name" />
      <result property="writeDate" column="writeDate" />
   </resultMap>
   
	<select id="selectAllNotice" resultMap="noticeResult">
		SELECT NOTICENO, TITLE, CONTENT, ADMINID, NAME, WRITEDATE
		 FROM NOTICE
		 order by noticeNO desc
	</select>
	
	<select id="selectOneNotice" resultType="NoticeVO"> 
		SELECT NOTICENO, TITLE, CONTENT, ADMINID, NAME, WRITEDATE
		 FROM NOTICE
		 where noticeNO=#{noticeNO}
	</select>
	
	<select id="selectMaxNotice" resultType="java.lang.Integer"> 
		SELECT max(noticeNO)
		 FROM NOTICE
	</select>
	
	<insert id="insertNotice" parameterType="NoticeVO">
		INSERT INTO NOTICE (NOTICENO, TITLE, CONTENT, ADMINID, NAME, WRITEDATE)
		 VALUES((select max(noticeNO)+1 from notice), #{title}, #{content}, #{adminID}, #{name}, sysdate)
	</insert>
	
	<update id="updateNotice" parameterType="NoticeVO">
		UPDATE NOTICE SET TITLE=#{title}, CONTENT=#{content}
		 WHERE NOTICENO=#{noticeNO}
	</update>
	
	<delete id="deleteNotice" parameterType="NoticeVO"> 
		DELETE FROM NOTICE
		 where noticeNO=#{noticeNO} 
	</delete>
	
	<select id="selectCategory" resultType="NoticeVO" parameterType="java.lang.String">
		SELECT NOTICENO, TITLE, CONTENT, ADMINID, NAME, WRITEDATE
		 FROM NOTICE
		 where name=#{key}
		 order by noticeNO desc
	</select>
	
</mapper>